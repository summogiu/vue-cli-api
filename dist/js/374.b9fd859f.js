"use strict";(self["webpackChunkvue_cli_api"]=self["webpackChunkvue_cli_api"]||[]).push([[374],{1374:function(e,l,t){t.r(l),t.d(l,{default:function(){return se}});var a=t(6768),r=t(4232);const s={class:"order-view-frame"},d={class:"table mt-4 article-list-table"},o=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{width:"120"},"訂單成立時間"),(0,a.Lk)("th",{width:"220"},"訂單編號"),(0,a.Lk)("th",null,"客戶資訊"),(0,a.Lk)("th",null,"訂單總額(NT$)"),(0,a.Lk)("th",{width:"120"},"付款狀態"),(0,a.Lk)("th",null,"編輯")])],-1),i={class:"btn-group"},n=["onClick"],u=["onClick"];function m(e,l,t,m,c,p){const k=(0,a.g2)("OrderModal"),b=(0,a.g2)("DeleteModal"),L=(0,a.g2)("PaginationComponents"),h=(0,a.g2)("Loading");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.Lk)("table",d,[o,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(c.orders,(l=>((0,a.uX)(),(0,a.CE)("tr",{key:l.id},[(0,a.Lk)("td",null,(0,r.v_)(e.$filters.date(l.create_at)),1),(0,a.Lk)("td",null,(0,r.v_)(l.id),1),(0,a.Lk)("td",null,[(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,"客戶名稱："+(0,r.v_)(l.user.name),1),(0,a.Lk)("li",null,"連絡電話："+(0,r.v_)(l.user.tel),1),(0,a.Lk)("li",null,"電子信箱："+(0,r.v_)(l.user.email),1),(0,a.Lk)("li",null,"寄送地址："+(0,r.v_)(l.user.address),1)])]),(0,a.Lk)("td",null,(0,r.v_)(e.$filters.currency(l.total)),1),(0,a.Lk)("td",{class:(0,r.C4)({public:l.is_paid})},(0,r.v_)(l.is_paid?"已付款":"未付款"),3),(0,a.Lk)("td",null,[(0,a.Lk)("div",i,[(0,a.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:e=>p.openModal(l)},"訂單詳細",8,n),(0,a.Lk)("button",{class:"btn btn-outline-danger btn-sm",onClick:e=>p.deleteModal(l)},"刪除",8,u)])])])))),128))])]),(0,a.bF)(k,{ref:"orderModal",onUpdateOrder:p.updateOrder,order:c.tempOrder},null,8,["onUpdateOrder","order"]),(0,a.bF)(b,{ref:"deleteModal",item:c.tempOrder,onDeleteItem:p.deleteOrder},null,8,["item","onDeleteItem"]),(0,a.bF)(L,{pages:c.pagination,onChangePage:p.getOrders},null,8,["pages","onChangePage"]),(0,a.bF)(h,{active:c.isLoading},null,8,["active"])])}var c=t(2574),p=t(5130);const k={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},b={class:"modal-dialog modal-xl",role:"document"},L={class:"modal-content border-0"},h=(0,a.Lk)("div",{class:"modal-header bg-dark text-white"},[(0,a.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,a.Lk)("span",null,"訂單詳細")]),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),v={class:"modal-body"},g={class:"row"},O={class:"row gx-2"},f={class:"mb-3 col-md-6"},y=(0,a.Lk)("label",{for:"title",class:"form-label"},"訂單成立日期",-1),_={class:"mb-3 col-md-6"},M=(0,a.Lk)("label",{for:"title",class:"form-label"},"訂單編號",-1),C={class:"row gx-2"},$={class:"mb-3 col-md-6"},x=(0,a.Lk)("label",{for:"total",class:"form-label"},"訂單總額(NT$)",-1),w={class:"mb-3 col-md-6"},J=(0,a.Lk)("p",null,"付款狀態",-1),U=(0,a.Lk)("label",{class:"form-check-label",for:"is_paid"}," 已付款 ",-1),E=(0,a.Lk)("hr",null,null,-1),X={class:"row gx-2"},V={class:"mb-3 col-md-6"},I=(0,a.Lk)("label",{class:"form-label"},"客戶名稱",-1),N={class:"mb-3 col-md-6"},F=(0,a.Lk)("label",{class:"form-label"},"聯絡號碼",-1),Q={class:"row gx-2"},q={class:"mb-3 col-md-6"},A=(0,a.Lk)("label",{class:"form-label"},"電子信箱",-1),D={class:"mb-3 col-md-6"},P=(0,a.Lk)("label",{class:"form-label"},"寄送地址",-1),S={class:"mb-3 message-box"},T=(0,a.Lk)("label",{for:"message",class:"form-label"},"備註訊息",-1),K=(0,a.Lk)("hr",null,null,-1),W={class:"mb-3"},j=(0,a.Lk)("label",{for:"title",class:"form-label"},"商品內容",-1),H=["onUpdate:modelValue","onInput"],z={class:"modal-footer"},B=(0,a.Lk)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function G(e,l,t,s,d,o){return(0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",b,[(0,a.Lk)("div",L,[h,(0,a.Lk)("div",v,[(0,a.Lk)("div",g,[(0,a.Lk)("div",O,[(0,a.Lk)("div",f,[y,(0,a.Lk)("p",null,(0,r.v_)(e.$filters.date(d.tempOrder.create_at)),1)]),(0,a.Lk)("div",_,[M,(0,a.Lk)("p",null,(0,r.v_)(d.tempOrder.id),1)])]),(0,a.Lk)("div",C,[(0,a.Lk)("div",$,[x,(0,a.bo)((0,a.Lk)("input",{type:"number",class:"form-control",id:"total","onUpdate:modelValue":l[0]||(l[0]=e=>d.tempOrder.total=e)},null,512),[[p.Jo,d.tempOrder.total,void 0,{number:!0}]])]),(0,a.Lk)("div",w,[J,(0,a.bo)((0,a.Lk)("input",{class:"form-check-input",type:"checkbox","true-value":!0,"false-value":!1,id:"is_paid","onUpdate:modelValue":l[1]||(l[1]=e=>d.tempOrder.is_paid=e)},null,512),[[p.lH,d.tempOrder.is_paid]]),U])]),E,(0,a.Lk)("div",X,[(0,a.Lk)("div",V,[I,d.tempOrder.user?(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:0,"onUpdate:modelValue":l[2]||(l[2]=e=>d.tempOrder.user.name=e),class:"form-control",disabled:""},null,512)),[[p.Jo,d.tempOrder.user.name]]):(0,a.Q3)("",!0)]),(0,a.Lk)("div",N,[F,d.tempOrder.user?(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:0,"onUpdate:modelValue":l[3]||(l[3]=e=>d.tempOrder.user.tel=e),class:"form-control"},null,512)),[[p.Jo,d.tempOrder.user.tel]]):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Q,[(0,a.Lk)("div",q,[A,d.tempOrder.user?(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:0,"onUpdate:modelValue":l[4]||(l[4]=e=>d.tempOrder.user.email=e),class:"form-control"},null,512)),[[p.Jo,d.tempOrder.user.email]]):(0,a.Q3)("",!0)]),(0,a.Lk)("div",D,[P,d.tempOrder.user?(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:0,"onUpdate:modelValue":l[5]||(l[5]=e=>d.tempOrder.user.address=e),class:"form-control"},null,512)),[[p.Jo,d.tempOrder.user.address]]):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",S,[T,(0,a.bo)((0,a.Lk)("textarea",{id:"message","onUpdate:modelValue":l[6]||(l[6]=e=>d.tempOrder.message=e),class:"form-control message-textarea"},null,512),[[p.Jo,d.tempOrder.message]])]),K,(0,a.Lk)("div",W,[j,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.tempOrder.products,((e,l)=>((0,a.uX)(),(0,a.CE)("li",{key:l},[(0,a.Lk)("span",null,"▪︎ "+(0,r.v_)(e.product.title),1),(0,a.Lk)("span",null,"NT$"+(0,r.v_)(e.product.price),1),(0,a.Lk)("span",null,[(0,a.eW)("×"),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":l=>e.qty=l,onInput:l=>o.validateQty(e),class:"form-control product-qty-input"},null,40,H),[[p.Jo,e.qty,void 0,{number:!0}]]),(0,a.eW)((0,r.v_)(e.product.unit),1)])])))),128))])])])]),(0,a.Lk)("div",z,[B,(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:l[7]||(l[7]=l=>e.$emit("update-order",d.tempOrder))},"確認")])])])],512)}var R=t(2023),Y={props:{order:{type:Object,default(){return{}}}},data(){return{tempOrder:{}}},watch:{order(){this.tempOrder=this.order,this.tempOrder.user||(this.tempOrder.user={})}},mixins:[R.A],methods:{validateQty(e){e.qty<0&&(e.qty=0)}},mounted(){this.tempOrder=this.order}},Z=t(1241);const ee=(0,Z.A)(Y,[["render",G]]);var le=ee,te=t(1716),ae={components:{PaginationComponents:c.A,OrderModal:le,DeleteModal:te.A},data(){return{orders:[],tempOrder:{},isLoading:!1,pagination:{}}},methods:{getOrders(e=1){const l=`https://vue3-course-api.hexschool.io/api/giugiu-api/admin/orders?page=${e}`;this.isLoading=!0,this.$http.get(l).then((e=>{this.isLoading=!1,e.data.success&&(this.orders=e.data.orders,this.pagination=e.data.pagination)})).catch((e=>{}))},openModal(e){this.tempOrder=JSON.parse(JSON.stringify(e));const l=this.$refs.orderModal;l.showModal()},updateOrder(e){this.tempOrder=e;const l=`https://vue3-course-api.hexschool.io/api/giugiu-api/admin/order/${e.id}`;this.$http.put(l,{data:e}).then((e=>{this.getOrders(),this.$pushMessage(e);const l=this.$refs.orderModal;l.hideModal()})).catch((e=>{}))},deleteOrder(e){const l=`https://vue3-course-api.hexschool.io/api/giugiu-api/admin/order/${e.id}`;this.$http.delete(l).then((e=>{this.getOrders(),this.$pushMessage(e,"刪除")})).catch((e=>{}));const t=this.$refs.deleteModal;t.hideModal()},deleteModal(e){this.tempOrder=JSON.parse(JSON.stringify(e));const l=this.$refs.deleteModal;l.showModal()}},created(){this.getOrders()},mounted(){document.title="訂單管理-In My Light"}};const re=(0,Z.A)(ae,[["render",m]]);var se=re}}]);
//# sourceMappingURL=374.b9fd859f.js.map