"use strict";(self["webpackChunkvue_cli_api"]=self["webpackChunkvue_cli_api"]||[]).push([[377],{4377:function(e,a,s){s.r(a),s.d(a,{default:function(){return Te}});var l=s(6768),t=s(4232),o=s(5130);const i={class:"place-page-frame"},n={class:"place-page-top"},r={class:"place-page-left"},c={class:"delivery-infor-box"},u={class:"delivery-infor-title field-title"},d=(0,l.Lk)("h3",null,"運送＆運費須知",-1),p={class:"delivery-infor-text"},m=(0,l.Lk)("h4",null,"好運物流",-1),k=(0,l.Lk)("p",null,"運費會根據送貨區域而有所不同。",-1),h=(0,l.Lk)("br",null,null,-1),L=(0,l.Lk)("p",null,"台北市區：NT$200／中部市區：NT$250／高屏地區：NT$250／ 花東地區：NT$400／ 宜蘭：NT$300／（不含稅）。 對於離島地區，會另外收取費用。 ",-1),v=(0,l.Lk)("br",null,null,-1),b=(0,l.Lk)("p",null,"如果一次購買商品總金額達到NT$8000或以上，則運費免費。",-1),f={key:0,class:"free-shipping-tip"},g={class:"form-box"},C=(0,l.Lk)("h3",null,"填寫收件資訊",-1),y={class:"mb-3"},$=(0,l.Lk)("label",{for:"name",class:"form-label"},[(0,l.eW)("姓名"),(0,l.Lk)("span",{class:"must-tip"},"必須")],-1),F={class:"mb-3"},_=(0,l.Lk)("label",{for:"email",class:"form-label"},[(0,l.eW)("Email"),(0,l.Lk)("span",{class:"must-tip"},"必須")],-1),V={class:"mb-3"},x=(0,l.Lk)("label",{for:"phone",class:"form-label"},[(0,l.eW)("連絡電話"),(0,l.Lk)("span",{class:"must-tip"},"必須")],-1),T={class:"mb-3"},q=(0,l.Lk)("label",{for:"region",class:"form-label"},[(0,l.eW)("地區"),(0,l.Lk)("span",{class:"must-tip"},"必須")],-1),E={class:"input-group"},N=(0,l.Lk)("option",{value:""},"地區",-1),U=(0,l.Lk)("option",{value:"臺北市"},"臺北市",-1),W=(0,l.Lk)("option",{value:"新北市"},"新北市",-1),D=(0,l.Lk)("option",{value:"桃園市"},"桃園市",-1),S=(0,l.Lk)("option",{value:"臺中市"},"臺中市",-1),X=(0,l.Lk)("option",{value:"臺南市"},"臺南市",-1),w=(0,l.Lk)("option",{value:"高雄市"},"高雄市",-1),Q=(0,l.Lk)("option",{value:"新竹縣"},"新竹縣",-1),O=(0,l.Lk)("option",{value:"苗栗縣"},"苗栗縣",-1),I=(0,l.Lk)("option",{value:"彰化縣"},"彰化縣",-1),J=(0,l.Lk)("option",{value:"南投縣"},"南投縣",-1),M=(0,l.Lk)("option",{value:"雲林縣"},"雲林縣",-1),P=(0,l.Lk)("option",{value:"嘉義縣"},"嘉義縣",-1),j=(0,l.Lk)("option",{value:"屏東縣"},"屏東縣",-1),A=(0,l.Lk)("option",{value:"宜蘭縣"},"宜蘭縣",-1),K=(0,l.Lk)("option",{value:"花蓮縣"},"花蓮縣",-1),R=(0,l.Lk)("option",{value:"臺東縣"},"臺東縣",-1),z={class:"couponCode-box input-group"},B=["disabled"],G=["disabled"],H={key:0,class:"isCoupon"},Y={class:"shopping-cart-box"},Z={class:"shopping-cart-title field-title"},ee=(0,l.Lk)("h3",null,"購物車",-1),ae={class:"shopping-cart-list"},se={class:"shopping-cart-list-title"},le=["src"],te={class:"shopping-cart-list-content"},oe={class:"shopping-cart-list-qty"},ie=["onUpdate:modelValue","onChange"],ne={class:"shopping-cart-list-price-box"},re={key:0,class:"one-price"},ce=(0,l.Lk)("span",null,"單價",-1),ue={class:"shopping-cart-list-delete"},de=["onClick"],pe={class:"shopping-cart-total-box"},me={class:"total"},ke=(0,l.Lk)("span",{class:"label"},"合計",-1),he={class:"num"},Le=(0,l.Lk)("span",{class:"label"},"應付金額",-1),ve={class:"num"},be={class:"back-produst-list"},fe=(0,l.Lk)("span",null,"繼續購買",-1),ge={class:"place-page-bottom"},Ce={class:"mb-3"},ye=(0,l.Lk)("label",{for:"message",class:"form-label"},"備註",-1),$e=(0,l.Lk)("div",{class:"other-inform"},[(0,l.Lk)("p",null,"本產品由批發商和直營店共享庫存。因此，根據您的下單時間，我們可能會因銷售情況而缺貨。"),(0,l.Lk)("br"),(0,l.Lk)("p",null,"對於造成您的不便，我們深表歉意，但感謝您的理解。如果訂單狀況有異，我們將與您聯繫。")],-1);function Fe(e,a,s,Fe,_e,Ve){const xe=(0,l.g2)("Loading"),Te=(0,l.g2)("font-awesome-icon"),qe=(0,l.g2)("Field"),Ee=(0,l.g2)("ErrorMessage"),Ne=(0,l.g2)("Form"),Ue=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(xe,{active:_e.isLoading},null,8,["active"]),(0,l.Lk)("div",i,[(0,l.Lk)("div",n,[(0,l.Lk)("div",r,[(0,l.Lk)("div",c,[(0,l.Lk)("div",u,[(0,l.bF)(Te,{icon:["fas","truck"],class:"field-title-icon"}),d]),(0,l.Lk)("div",p,[m,k,h,L,v,b,Ve.isFreeShipping?((0,l.uX)(),(0,l.CE)("p",f,[(0,l.eW)(" 再購買NT"),(0,l.Lk)("span",null,"$"+(0,t.v_)(8e3-_e.cartsData.finalTotal),1),(0,l.eW)("元可免貨運費！ ")])):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",g,[C,(0,l.bF)(Ne,{ref:"userForm",onSubmit:Ve.placeOrder},{default:(0,l.k6)((({errors:e})=>[(0,l.Lk)("div",y,[$,(0,l.bF)(qe,{id:"name",name:"姓名",type:"name",class:(0,t.C4)(["form-control",{"is-invalid":e["姓名"],"is-valid":!e["姓名"]&&_e.form.user.name}]),rules:"required",modelValue:_e.form.user.name,"onUpdate:modelValue":a[0]||(a[0]=e=>_e.form.user.name=e),placeholder:"請輸入姓名"},null,8,["class","modelValue"]),(0,l.bF)(Ee,{class:"invalid-feedback",name:"姓名"})]),(0,l.Lk)("div",F,[_,(0,l.bF)(qe,{id:"email",name:"email",type:"email",class:(0,t.C4)(["form-control",{"is-invalid":e["email"],"is-valid":!e["email"]&&_e.form.user.email}]),rules:"email|required",modelValue:_e.form.user.email,"onUpdate:modelValue":a[1]||(a[1]=e=>_e.form.user.email=e),placeholder:"請輸入Email"},null,8,["class","modelValue"]),(0,l.bF)(Ee,{class:"invalid-feedback",name:"email"})]),(0,l.Lk)("div",V,[x,(0,l.bF)(qe,{id:"phone",name:"電話",type:"text",class:(0,t.C4)(["form-control",{"is-invalid":e["電話"],"is-valid":!e["電話"]&&_e.form.user.tel}]),rules:"required",modelValue:_e.form.user.tel,"onUpdate:modelValue":a[2]||(a[2]=e=>_e.form.user.tel=e),placeholder:"請輸入連絡電話"},null,8,["class","modelValue"]),(0,l.bF)(Ee,{class:"invalid-feedback",name:"電話"})]),(0,l.Lk)("div",T,[q,(0,l.Lk)("div",E,[(0,l.bF)(qe,{id:"region",name:"地區",class:(0,t.C4)(["form-select region-select",{"is-invalid":e["地區"],"is-valid":!e["地區"]&&_e.region}]),as:"select",rules:"required",modelValue:_e.region,"onUpdate:modelValue":a[3]||(a[3]=e=>_e.region=e)},{default:(0,l.k6)((()=>[N,U,W,D,S,X,w,Q,O,I,J,M,P,j,A,K,R])),_:2},1032,["class","modelValue"]),(0,l.bF)(qe,{id:"other_address",name:"地址",type:"text",class:(0,t.C4)(["form-control",{"is-invalid":e["地址"],"is-valid":!e["地址"]&&_e.other_address}]),rules:"required",modelValue:_e.other_address,"onUpdate:modelValue":a[4]||(a[4]=e=>_e.other_address=e),placeholder:"請輸入連絡地址"},null,8,["class","modelValue"]),(0,l.bF)(Ee,{class:"invalid-feedback",name:"地區"}),(0,l.bF)(Ee,{class:"invalid-feedback",name:"地址"})])])])),_:1},8,["onSubmit"]),(0,l.Lk)("div",z,[(0,l.bo)((0,l.Lk)("input",{type:"text",class:(0,t.C4)(["form-control",{"is-valid":_e.isCoupon}]),placeholder:"請輸入優惠碼","aria-label":"Recipient's username","onUpdate:modelValue":a[5]||(a[5]=e=>_e.couponCode=e),disabled:_e.isCoupon},null,10,B),[[o.Jo,_e.couponCode]]),(0,l.Lk)("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:a[6]||(a[6]=e=>Ve.useCoupon(_e.couponCode)),disabled:_e.isCoupon},"套用優惠碼",8,G)]),_e.isCoupon?((0,l.uX)(),(0,l.CE)("p",H,"已成功使用優惠券")):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",Y,[(0,l.Lk)("div",Z,[(0,l.bF)(Te,{icon:["fas","cart-shopping"],class:"field-title-icon"}),ee]),(0,l.Lk)("ul",ae,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(_e.carts,(a=>((0,l.uX)(),(0,l.CE)("li",{key:a.id},[(0,l.Lk)("div",se,[(0,l.Lk)("img",{src:a.product.imageUrl,alt:"item.product.title"},null,8,le),(0,l.Lk)("p",null,(0,t.v_)(a.product.title),1)]),(0,l.Lk)("div",te,[(0,l.Lk)("div",oe,[(0,l.bo)((0,l.Lk)("input",{type:"number",min:"1","onUpdate:modelValue":e=>a.qty=e,onChange:e=>Ve.updateOneQty(a)},null,40,ie),[[o.Jo,a.qty]]),(0,l.Lk)("span",null,(0,t.v_)(a.product.unit),1)]),(0,l.Lk)("div",ne,[a.qty>1?((0,l.uX)(),(0,l.CE)("p",re,[ce,(0,l.eW)("NT$"+(0,t.v_)(a.product.price),1)])):(0,l.Q3)("",!0),(0,l.Lk)("p",null,"NT$"+(0,t.v_)(e.$filters.currency(a.product.price*a.qty)),1)])]),(0,l.Lk)("div",ue,[(0,l.Lk)("button",{onClick:e=>Ve.deleteProduct(a.id)},"刪除",8,de)])])))),128))]),(0,l.Lk)("div",pe,[(0,l.Lk)("div",me,[ke,(0,l.Lk)("span",he,"$NT"+(0,t.v_)(e.$filters.currency(_e.cartsData.total)),1)]),(0,l.Lk)("div",{class:(0,t.C4)(["final-total",[_e.isCoupon?"isCoupon":""]])},[Le,(0,l.Lk)("span",ve,"$NT"+(0,t.v_)(e.$filters.currency(_e.cartsData.finalTotal)),1)],2)]),(0,l.Lk)("div",be,[(0,l.bF)(Ue,{to:"/products/productslist"},{default:(0,l.k6)((()=>[(0,l.bF)(Te,{icon:["fas","angle-left"]}),fe])),_:1})])])]),(0,l.Lk)("div",ge,[(0,l.Lk)("div",Ce,[ye,(0,l.bo)((0,l.Lk)("textarea",{id:"message",name:"message",rows:"4",class:"form-control remark-message","onUpdate:modelValue":a[7]||(a[7]=e=>_e.form.message=e),placeholder:"請輸入訊息"},null,512),[[o.Jo,_e.form.message]])]),$e,(0,l.Lk)("button",{class:"confirm-btn",type:"submit",onClick:a[8]||(a[8]=(...e)=>Ve.handleSubmit&&Ve.handleSubmit(...e))}," 我已確認內容，確定下單 "),(0,l.bF)(Ue,{to:"/products/productslist",class:"back-btn"},{default:(0,l.k6)((()=>[(0,l.eW)(" 返回商店繼續選購 ")])),_:1})])])])}s(4114);var _e={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},region:"",other_address:"",carts:[],cartsData:{finalTotal:0,total:0},couponCode:"",isCoupon:!1,isLoading:!1}},computed:{isFreeShipping(){return this.cartsData.finalTotal<8e3}},methods:{handleSubmit(){const e=this.$refs.userForm;e&&e.$el.dispatchEvent(new Event("submit",{bubbles:!0}))},placeOrder(){this.form.user.address=`${this.region}${this.other_address}`;const e="https://vue3-course-api.hexschool.io/api/giugiu-api/order";this.isLoading=!0,this.$http.post(e,{data:this.form}).then((e=>{if(e.data.success)this.isLoading=!1,this.$router.push(`checkout/${e.data.orderId}`);else{this.isLoading=!1;const a="string"===typeof e.data.message?[e.data.message]:e.data.message;alert(a.join("\n"))}})).catch((e=>{}))},getCart(){const e="https://vue3-course-api.hexschool.io/api/giugiu-api/cart";this.$http.get(e).then((e=>{this.carts=e.data.data.carts,this.cartsData.finalTotal=e.data.data.final_total,this.cartsData.total=e.data.data.total,this.carts[0].coupon&&(this.isCoupon=!0,this.couponCode=this.carts[0].coupon.code)})).catch((e=>{}))},updateOneQty(e){const a=`https://vue3-course-api.hexschool.io/api/giugiu-api/cart/${e.id}`,s={product_id:e.id,qty:e.qty};this.$http.put(a,{data:s}).then((e=>{e.data.success&&this.getCart()})).catch((e=>{}))},deleteProduct(e){const a=`https://vue3-course-api.hexschool.io/api/giugiu-api/cart/${e}`;this.$http.delete(a).then((e=>{e.data.success&&this.getCart()})).catch((e=>{}))},useCoupon(e){const a="https://vue3-course-api.hexschool.io/api/giugiu-api/coupon",s={code:e};this.$http.post(a,{data:s}).then((e=>{e.data.success&&this.getCart()})).catch((e=>{}))}},created(){this.getCart()},mounted(){document.title="填寫收件資訊-In My Light"}},Ve=s(1241);const xe=(0,Ve.A)(_e,[["render",Fe]]);var Te=xe}}]);
//# sourceMappingURL=377.05867476.js.map