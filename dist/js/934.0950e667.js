"use strict";(self["webpackChunkvue_cli_api"]=self["webpackChunkvue_cli_api"]||[]).push([[934],{6934:function(t,e,s){s.r(e),s.d(e,{default:function(){return $}});var a=s(6768),o=s(4232),l=s(5130);const n={class:"form-box"},u={class:"table products-content-table"},c=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"product-cart-title-th"},"品項"),(0,a.Lk)("th",null,"數量"),(0,a.Lk)("th",{colspan:"2",class:"ta-end"},"單價")])],-1),d={class:"input-group"},i={class:"ta-end"},r=(0,a.Lk)("td",{colspan:"2",class:"ta-end"},"總計",-1),p={class:"ta-end"},k={key:0,class:"coupon-percent"},h={class:"table user-content-table"},L=(0,a.Lk)("th",null,"Email",-1),b=(0,a.Lk)("th",null,"收件人姓名",-1),g=(0,a.Lk)("th",null,"收件人電話",-1),v=(0,a.Lk)("th",null,"收件地址",-1),_=(0,a.Lk)("th",null,"付款狀態",-1),y={key:0,class:"paid-success-box"},m=(0,a.Lk)("p",null,"付款成功！",-1),C=(0,a.Lk)("p",null,"訂單已為您安排。",-1);function D(t,e,s,D,f,x){const M=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",n,[(0,a.Lk)("table",u,[c,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(f.oderData.products,(t=>((0,a.uX)(),(0,a.CE)("tr",{key:t.id},[(0,a.Lk)("td",null,(0,o.v_)(t.product.title),1),(0,a.Lk)("td",null,[(0,a.Lk)("div",d,[(0,a.Lk)("p",null,(0,o.v_)(t.qty)+"/"+(0,o.v_)(t.product.unit),1)])]),(0,a.Lk)("td",i,(0,o.v_)(t.product.price),1)])))),128)),(0,a.Lk)("tr",null,[r,(0,a.Lk)("td",p,[(0,a.eW)(" NT$"+(0,o.v_)(t.$filters.currency(f.oderData.total))+" ",1),f.isCoupon?((0,a.uX)(),(0,a.CE)("span",k,"(已套用"+(0,o.v_)(.1*f.couponPercent)+"折優惠)",1)):(0,a.Q3)("",!0)])])])]),(0,a.Lk)("table",h,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[L,(0,a.Lk)("td",null,(0,o.v_)(f.oderData.user.email),1)]),(0,a.Lk)("tr",null,[b,(0,a.Lk)("td",null,(0,o.v_)(f.oderData.user.name),1)]),(0,a.Lk)("tr",null,[g,(0,a.Lk)("td",null,(0,o.v_)(f.oderData.user.tel),1)]),(0,a.Lk)("tr",null,[v,(0,a.Lk)("td",null,(0,o.v_)(f.oderData.user.address),1)]),(0,a.Lk)("tr",null,[_,(0,a.Lk)("td",{class:(0,o.C4)([{isPay:f.oderData.is_paid},"paid-box"])},[(0,a.eW)((0,o.v_)(f.oderData.is_paid?"付款完成":"尚未付款")+" ",1),f.oderData.is_paid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",class:"btn paid-btn",onClick:e[0]||(e[0]=(...t)=>x.paying&&x.paying(...t))}," 立即付款"))],2)])])]),(0,a.bF)(l.eB,{name:"upScale"},{default:(0,a.k6)((()=>[f.successMessageBox?((0,a.uX)(),(0,a.CE)("div",y,[m,C,(0,a.Lk)("button",{type:"button",onClick:e[1]||(e[1]=(...t)=>x.closeMessage&&x.closeMessage(...t))},[(0,a.bF)(M,{icon:["fas","xmark"],class:"close-success-message"})])])):(0,a.Q3)("",!0)])),_:1})])])}var f=s(1600),x={data(){return{oderId:"",oderData:{user:{},products:[],total:0,is_paid:!1},isCoupon:!1,couponPercent:100,successMessageBox:!1}},mixins:[f.A],methods:{getOder(){const t=`https://vue3-course-api.hexschool.io/api/giugiu-api/order/${this.oderId}`;this.$http.get(t).then((t=>{this.oderData=t.data.order,f.A.emit("isPaid",this.oderData.is_paid);const e=Object.keys(this.oderData.products)[0],s=this.oderData.products[e];s.coupon.is_enabled&&(this.isCoupon=!0,this.couponPercent=s.coupon.percent)})).catch((t=>{console.log(t.data)}))},paying(){const t=`https://vue3-course-api.hexschool.io/api/giugiu-api/pay/${this.oderId}`;this.$http.post(t,{}).then((t=>{this.successMessageBox=!0,this.getOder()}))},closeMessage(){this.successMessageBox=!1}},created(){this.oderId=this.$route.params.oderid,this.getOder()},mounted(){document.title="結帳頁面-In My Light"}},M=s(1241);const E=(0,M.A)(x,[["render",D]]);var $=E}}]);
//# sourceMappingURL=934.0950e667.js.map