{"version":3,"file":"js/934.0950e667.js","mappings":"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","sources":["webpack://vue-cli-api/./src/views/user/CheckoutView.vue","webpack://vue-cli-api/./src/views/user/CheckoutView.vue?c579"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"form-box\">\r\n      <table class=\"table products-content-table\">\r\n        <thead>\r\n          <tr>\r\n            <th class=\"product-cart-title-th\">品項</th>\r\n            <th>數量</th>\r\n            <th colspan=\"2\" class=\"ta-end\">單價</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"item in oderData.products\" :key=item.id>\r\n            <td>{{ item.product.title }}</td>\r\n            <td>\r\n              <div class=\"input-group\">\r\n                <p>{{ item.qty }}/{{ item.product.unit }}</p>\r\n              </div>\r\n              </td>\r\n            <td class=\"ta-end\">{{ item.product.price }}</td>\r\n          </tr>\r\n          <tr>\r\n            <td colspan=\"2\" class=\"ta-end\">總計</td>\r\n            <td class=\"ta-end\">\r\n              NT${{ $filters.currency(oderData.total) }}\r\n              <span v-if=\"isCoupon\" class=\"coupon-percent\">(已套用{{ couponPercent * 0.1 }}折優惠)</span>\r\n              </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <table class=\"table user-content-table\">\r\n        <tbody>\r\n          <tr>\r\n            <th>Email</th>\r\n            <td>{{ oderData.user.email }}</td>\r\n            </tr>\r\n          <tr>\r\n            <th>收件人姓名</th>\r\n            <td>{{ oderData.user.name }}</td>\r\n            </tr>\r\n          <tr>\r\n            <th>收件人電話</th>\r\n            <td>{{ oderData.user.tel }}</td>\r\n            </tr>\r\n          <tr>\r\n            <th>收件地址</th>\r\n            <td>{{ oderData.user.address }}</td>\r\n            </tr>\r\n          <tr>\r\n            <th>付款狀態</th>\r\n            <td :class=\"{ 'isPay': oderData.is_paid }\" class=\"paid-box\">\r\n              {{ oderData.is_paid ? '付款完成' : '尚未付款' }}\r\n              <button type=\"button\" class=\"btn paid-btn\"\r\n              v-if=\"!oderData.is_paid\" @click=\"paying\">\r\n                立即付款</button>\r\n            </td>\r\n            </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <transition name=\"upScale\">\r\n        <div class=\"paid-success-box\" v-if=\"successMessageBox\">\r\n          <p>付款成功！</p>\r\n          <p>訂單已為您安排。</p>\r\n          <button type=\"button\" @click=\"closeMessage\">\r\n            <font-awesome-icon :icon=\"['fas', 'xmark']\" class=\"close-success-message\" />\r\n          </button>\r\n        </div>\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.form-box{\r\n  width: 90%;\r\n  margin: 0 auto 100px auto;\r\n\r\n  .products-content-table{\r\n    border: 1px solid $subColor4;\r\n    margin-bottom: 50px;\r\n\r\n    thead{\r\n      th{\r\n        background-color: black;\r\n        color: white;\r\n      }\r\n    }\r\n    .coupon-percent{\r\n      margin-left: 10px;\r\n      color: $subColor5;\r\n    }\r\n  }\r\n  .user-content-table{\r\n    border: 1px solid $subColor4;\r\n\r\n    tr{\r\n      border-bottom: 1px solid $subColor4;\r\n    }\r\n    th{\r\n      background-color: black;\r\n      color: white;\r\n      width: 100px;\r\n    }\r\n    .paid-box{\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n\r\n      .paid-btn{\r\n        background-color: $subColor5;\r\n        color: white;\r\n      }\r\n    }\r\n    .isPay{\r\n        color: $subColor5;\r\n        font-weight: bold;\r\n      }\r\n  }\r\n\r\n  .paid-success-box{\r\n    background-color: white;\r\n    border: 1px solid $subColor5;\r\n    border-radius: 5px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    padding: 20px;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    color: $subColor5;\r\n\r\n    button{\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      background-color: transparent;\r\n      border: none;\r\n      color: $subColor5;\r\n    }\r\n  }\r\n}\r\n@media (max-width:919px){\r\n  .form-box{\r\n    .products-content-table{\r\n      width: 100%;\r\n      overflow-x: auto;\r\n      display: block;\r\n\r\n      thead{\r\n        tr{\r\n          th{\r\n            width: 100%;\r\n            white-space: nowrap;\r\n          }\r\n        }\r\n      }\r\n      tbody{\r\n        tr{\r\n          td{\r\n            max-width: 200px;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .paid-success-box{\r\n      padding: 20px 5px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nimport emitter from '@/methods/emitter'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      oderId: '',\r\n      oderData: {\r\n        user: {}, // 初始化 oderData 中的 user 為一個空對象\r\n        products: [],\r\n        total: 0,\r\n        is_paid: false\r\n      },\r\n      isCoupon: false,\r\n      couponPercent: 100,\r\n      successMessageBox: false\r\n    }\r\n  },\r\n  mixins: [emitter],\r\n  methods: {\r\n    getOder () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${this.oderId}`\r\n      this.$http.get(api)\r\n        .then((res) => {\r\n          this.oderData = res.data.order\r\n          emitter.emit('isPaid', this.oderData.is_paid)\r\n\r\n          // 是否有使用優惠券\r\n          const productid = Object.keys(this.oderData.products)[0]\r\n          const productData = this.oderData.products[productid]\r\n          if (productData.coupon.is_enabled) {\r\n            this.isCoupon = true\r\n            this.couponPercent = productData.coupon.percent\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error.data)\r\n        })\r\n    },\r\n    paying () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${this.oderId}`\r\n      this.$http.post(api, {})\r\n        .then((res) => {\r\n          this.successMessageBox = true\r\n          this.getOder()\r\n        })\r\n    },\r\n    closeMessage () {\r\n      this.successMessageBox = false\r\n    }\r\n  },\r\n  created () {\r\n    this.oderId = this.$route.params.oderid\r\n    this.getOder()\r\n  },\r\n  mounted () {\r\n    document.title = '結帳頁面-In My Light'\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CheckoutView.vue?vue&type=template&id=29c072e4\"\nimport script from \"./CheckoutView.vue?vue&type=script&lang=js\"\nexport * from \"./CheckoutView.vue?vue&type=script&lang=js\"\n\nimport \"./CheckoutView.vue?vue&type=style&index=0&id=29c072e4&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","colspan","key","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_Fragment","_renderList","$data","oderData","products","item","id","_toDisplayString","product","title","_hoisted_4","qty","unit","_hoisted_5","price","_hoisted_6","_hoisted_7","_createTextVNode","_ctx","$filters","currency","total","isCoupon","_hoisted_8","couponPercent","_createCommentVNode","_hoisted_9","_hoisted_10","user","email","_hoisted_11","name","_hoisted_12","tel","_hoisted_13","address","_hoisted_14","_normalizeClass","is_paid","type","onClick","_cache","args","$options","paying","_createVNode","_Transition","default","_withCtx","successMessageBox","_hoisted_15","_hoisted_16","_hoisted_17","closeMessage","_component_font_awesome_icon","icon","_","data","oderId","mixins","emitter","methods","getOder","api","this","$http","get","then","res","order","emit","productid","Object","keys","productData","coupon","is_enabled","percent","catch","error","console","log","post","created","$route","params","oderid","mounted","document","__exports__","render"],"sourceRoot":""}